{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\reactProjects\\\\findYourHouse\\\\app\\\\src\\\\components\\\\Detail.js\";\n\n/* eslint-disable react/no-unescaped-entities */\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as houseActions from '../actions/houseActions';\nimport Nav from './Nav';\nimport list from '../styles/List.module.css';\nimport Stars from './Stars';\n\nconst Detail = ({\n  state,\n  actions,\n  history,\n  match\n}) => {\n  const [navOpen, setNavOpen] = useState(false);\n  const [fullText, setFullText] = useState(false);\n  const [item, setItem] = useState(null);\n\n  if (item) {\n    const {\n      description,\n      title,\n      frequency,\n      day,\n      duration,\n      id\n    } = item;\n  }\n\n  if (state.subscription) {\n    const creator = state.subscription.user;\n  }\n\n  if (state.subscription) {\n    const {\n      name,\n      picture\n    } = state.subscription.user;\n  }\n\n  const parent = useRef(null);\n  const meetings = state.subscription.meetings;\n  const current_user = state.currentUser.id;\n  useEffect(() => {\n    if (state.authenticated && localStorage.getItem(\"token\") && localStorage.getItem(\"token\") !== 'undefined') {\n      const token = localStorage.getItem('token');\n      actions.fetchSubscription(`https://aqueous-wildwood-18424.herokuapp.com/meets/${match.params.id}`, {\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      });\n    }\n  }, [state.authenticated]);\n  useEffect(() => {\n    if (state.subscription && state.subscription.meet) {\n      setItem(state.subscription.meet);\n    }\n  }, [state.subscription]);\n  useEffect(() => {\n    if (navOpen === true) {\n      setFullText(false);\n    }\n  }, [navOpen]);\n\n  const clickHandler = () => {\n    setFullText(!fullText);\n  };\n\n  const keyDownHandler = () => {\n    clickHandler();\n  };\n\n  const handleClick = () => {\n    history.push('/messages/');\n  };\n\n  const handleFavorite = () => {\n    const token = localStorage.getItem('token');\n    fetch('https://aqueous-wildwood-18424.herokuapp.com/user_meets/', {\n      method: \"POST\",\n      body: JSON.stringify({\n        user_id: `${current_user}`,\n        meet_id: `${item.id}`\n      }),\n      headers: {\n        \"Content-Length\": 57,\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      credentials: \"same-origin\"\n    }).then(res => res.json()).then(_json => {\n      history.push('/favorites/');\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: list['wrapper--details'],\n    ref: parent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    open: navOpen,\n    setNavOpen: setNavOpen,\n    parent: parent,\n    searchOpen: false,\n    local: \"Detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), item ? /*#__PURE__*/React.createElement(\"main\", {\n    className: list[!fullText ? 'main--details' : 'main--details--open'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: list.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: list.left,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: list['profile-picture'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: state.subscription.user.picture,\n    alt: \"User\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, state.subscription.user.name), /*#__PURE__*/React.createElement(Stars, {\n    points: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: list.right,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, item.day.substring(0, 3), \" - \", item.duration, \"h\"), /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, item.frequency, \" meetings\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: list.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: list.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, item.title, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleFavorite,\n    className: \"btn btn-transparent\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, \"Add to favorites\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: list[!fullText ? 'summary--min' : 'summary'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, item.description, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, \"Next Meetings\"), meetings.map(meeting => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: list['meeting-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }, meeting.title), /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, meeting.date), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, \"Confirmed participants: \", meeting.confirmed_members), /*#__PURE__*/React.createElement(\"a\", {\n    className: list['meeting-link'],\n    href: `${meeting.link}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: list.zoom,\n    src: \"https://seeklogo.com/images/Z/zoom-icon-logo-C552F99BAC-seeklogo.com.png\",\n    alt: \"Zoom online meeting link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }), \"Meeting link\")))), /*#__PURE__*/React.createElement(\"div\", {\n    role: \"button\",\n    onClick: clickHandler,\n    className: list.down,\n    tabIndex: -1,\n    \"aria-label\": !fullText ? 'Show full text' : 'Hide text',\n    onKeyDown: keyDownHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, !fullText ? /*#__PURE__*/React.createElement(\"svg\", {\n    className: list['down-arrow'],\n    \"aria-hidden\": \"true\",\n    focusable: \"true\",\n    \"data-prefix\": \"fal\",\n    \"data-icon\": \"chevron-down\",\n    role: \"button\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M443.5 162.6l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L224 351 28.5 155.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l211 211.1c4.7 4.7 12.3 4.7 17 0l211-211.1c4.8-4.7 4.8-12.3.1-17z\",\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 23\n    }\n  })) : /*#__PURE__*/React.createElement(\"svg\", {\n    className: list['down-arrow'],\n    \"aria-hidden\": \"true\",\n    focusable: \"true\",\n    \"data-prefix\": \"fal\",\n    \"data-icon\": \"chevron-up\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M4.465 366.475l7.07 7.071c4.686 4.686 12.284 4.686 16.971 0L224 178.053l195.494 195.493c4.686 4.686 12.284 4.686 16.971 0l7.07-7.071c4.686-4.686 4.686-12.284 0-16.97l-211.05-211.051c-4.686-4.686-12.284-4.686-16.971 0L4.465 349.505c-4.687 4.686-4.687 12.284 0 16.97z\",\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClick,\n    className: \"btn btn--orange--full\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, \"Apply to join\"))) : null);\n};\n\nfunction mapStateToProps({\n  state\n}) {\n  return {\n    state: { ...state\n    }\n  };\n}\n\nfunction mapActionsToProps(dispatch) {\n  return {\n    actions: bindActionCreators({ ...houseActions\n    }, dispatch)\n  };\n}\n\nDetail.propTypes = {\n  history: PropTypes.objectOf(PropTypes.any).isRequired\n};\nexport default connect(mapStateToProps, mapActionsToProps)(withRouter(Detail));","map":{"version":3,"sources":["C:/Users/Usuario/reactProjects/findYourHouse/app/src/components/Detail.js"],"names":["React","useState","useRef","useEffect","PropTypes","withRouter","connect","bindActionCreators","houseActions","Nav","list","Stars","Detail","state","actions","history","match","navOpen","setNavOpen","fullText","setFullText","item","setItem","description","title","frequency","day","duration","id","subscription","creator","user","name","picture","parent","meetings","current_user","currentUser","authenticated","localStorage","getItem","token","fetchSubscription","params","headers","meet","clickHandler","keyDownHandler","handleClick","push","handleFavorite","fetch","method","body","JSON","stringify","user_id","meet_id","credentials","then","res","json","_json","catch","error","console","log","image","left","right","substring","map","meeting","date","confirmed_members","link","zoom","down","mapStateToProps","mapActionsToProps","dispatch","propTypes","objectOf","any","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-unescaped-entities */\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as houseActions from '../actions/houseActions';\nimport Nav from './Nav';\nimport list from '../styles/List.module.css';\nimport Stars from './Stars';\n\nconst Detail = ({ state, actions, history, match }) => {\n  const [navOpen, setNavOpen] = useState(false);\n  const [fullText, setFullText] = useState(false);\n  const [item, setItem] = useState(null);\n\n  if (item) {\n    const { description, title, frequency, day, duration, id } = item;\n  }\n\n  if (state.subscription) {\n    const creator = state.subscription.user;\n  }\n\n  if (state.subscription) {\n    const { name, picture } = state.subscription.user; \n  }\n  const parent = useRef(null);\n\n  const meetings = state.subscription.meetings;\n  const current_user= state.currentUser.id;\n\n  useEffect(() => {\n    if (state.authenticated\n        && localStorage.getItem(\"token\")\n        && localStorage.getItem(\"token\") !== 'undefined'\n      ) {\n        const token = localStorage.getItem('token');\n        actions.fetchSubscription(`https://aqueous-wildwood-18424.herokuapp.com/meets/${match.params.id}`, {\n          headers: {\n            \"Authorization\": `Bearer ${token}`\n          }\n        });\n    }\n  }, [state.authenticated]);\n\n  useEffect(() => {\n    if (state.subscription && state.subscription.meet) {\n      setItem(state.subscription.meet);\n    }\n  }, [state.subscription]);\n\n  useEffect(() => {\n    if (navOpen === true) {\n      setFullText(false);\n    }\n  }, [navOpen]);\n\n  const clickHandler = () => {\n    setFullText(!fullText);\n  };\n\n  const keyDownHandler = () => {\n    clickHandler();\n  };\n\n  const handleClick = () => {\n    history.push('/messages/');\n  };\n\n  const handleFavorite = () => {\n    const token = localStorage.getItem('token');\n\n    fetch('https://aqueous-wildwood-18424.herokuapp.com/user_meets/', {\n      method: \"POST\",\n      body: JSON.stringify({\n        user_id: `${current_user}`,\n        meet_id: `${item.id}`,\n      }),\n      headers: {\n        \"Content-Length\": 57,\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      credentials: \"same-origin\"\n    })\n    .then(res => res.json()).then(_json => {\n      history.push('/favorites/');\n    })\n    .catch(error => {\n      console.log(error);\n    })\n  };\n\n  return (\n    <div className={list['wrapper--details']} ref={parent}>\n      <Nav open={navOpen} setNavOpen={setNavOpen} parent={parent} searchOpen={false} local=\"Detail\" />\n\n      { item\n        ? (\n          <main className={list[!fullText ? 'main--details' : 'main--details--open']}>\n          <div className={list.image}>\n            <div className={list.left}>\n              <div className={list['profile-picture']}>\n                <img src={state.subscription.user.picture} alt=\"User\" />\n              </div>\n              <div>\n                <h5>{state.subscription.user.name}</h5>\n                <Stars points={3} />\n              </div>\n            </div>\n            <div className={list.right}>\n              <h5>{item.day.substring(0,3)} - {item.duration}h</h5>\n              <small>{item.frequency} meetings</small>\n            </div>\n          </div>\n          <div className={list.description}>\n            <h4 className={list.title}>\n              { item.title }\n              <button onClick={handleFavorite} className=\"btn btn-transparent\" type=\"button\">Add to favorites</button>\n            </h4>\n            <p className={list[!fullText ? 'summary--min' : 'summary']}>\n              { item.description }\n              <hr/>\n              <h5>Next Meetings</h5>\n              { meetings.map(meeting => (\n                <div>\n                  <h6 className={list['meeting-title']}>{meeting.title}</h6>\n                  <em>{meeting.date}</em>\n                  <p>Confirmed participants: {meeting.confirmed_members}</p>\n                  <a className={list['meeting-link']} href={`${meeting.link}`}>\n                    <img className={list.zoom} src='https://seeklogo.com/images/Z/zoom-icon-logo-C552F99BAC-seeklogo.com.png' alt='Zoom online meeting link' />\n                    Meeting link\n                  </a>\n                </div>\n              )) }\n            </p>\n            <div\n              role=\"button\"\n              onClick={clickHandler}\n              className={list.down}\n              tabIndex={-1}\n              aria-label={!fullText ? 'Show full text' : 'Hide text'}\n              onKeyDown={keyDownHandler}\n            >\n              {\n                !fullText\n                  ? (\n                    <svg className={list['down-arrow']} aria-hidden=\"true\" focusable=\"true\" data-prefix=\"fal\" data-icon=\"chevron-down\" role=\"button\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\n                      <path fill=\"currentColor\" d=\"M443.5 162.6l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L224 351 28.5 155.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l211 211.1c4.7 4.7 12.3 4.7 17 0l211-211.1c4.8-4.7 4.8-12.3.1-17z\" className=\"\" />\n                    </svg>\n                  ) : (\n                    <svg className={list['down-arrow']} aria-hidden=\"true\" focusable=\"true\" data-prefix=\"fal\" data-icon=\"chevron-up\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\n                      <path fill=\"currentColor\" d=\"M4.465 366.475l7.07 7.071c4.686 4.686 12.284 4.686 16.971 0L224 178.053l195.494 195.493c4.686 4.686 12.284 4.686 16.971 0l7.07-7.071c4.686-4.686 4.686-12.284 0-16.97l-211.05-211.051c-4.686-4.686-12.284-4.686-16.971 0L4.465 349.505c-4.687 4.686-4.687 12.284 0 16.97z\" className=\"\" />\n                    </svg>\n                  )\n              }\n  \n            </div>\n            <button onClick={handleClick} className=\"btn btn--orange--full\" type=\"button\">\n              Apply to join\n            </button>\n          </div>\n        </main>\n        )\n        : null\n      }\n    </div>\n  );\n};\n\nfunction mapStateToProps({ state }) {\n  return { state: { ...state } };\n}\n\nfunction mapActionsToProps(dispatch) {\n  return {\n    actions: bindActionCreators({ ...houseActions }, dispatch),\n  };\n}\n\nDetail.propTypes = {\n  history: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(withRouter(Detail));\n"]},"metadata":{},"sourceType":"module"}