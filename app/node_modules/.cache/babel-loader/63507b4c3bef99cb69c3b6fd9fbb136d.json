{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\reactProjects\\\\findYourHouse\\\\app\\\\src\\\\components\\\\ConversationsList.js\";\nimport React from 'react';\nimport { ActionCable } from 'react-actioncable-provider';\nimport NewConversationForm from './NewConversationForm';\nimport MessagemsArea from './MessagemsArea';\nimport Cable from './Cable';\n\nclass ConversationsList extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      conversations: [],\n      activeConversation: null\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleReceivedConversation = this.handleReceivedConversation.bind(this);\n    this.handleReceivedMessagem = this.handleReceivedMessagem.bind(this);\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    fetch('https://aqueous-wildwood-18424.herokuapp.com/conversations', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n        Accept: 'application/json'\n      }\n    }).then(res => res.json()).then(conversations => this.setState({\n      conversations\n    }));\n  }\n\n  handleClick(id) {\n    this.setState({\n      activeConversation: id\n    });\n  }\n\n  handleReceivedConversation(response) {\n    const {\n      conversation\n    } = response;\n    this.setState({\n      conversations: [...this.state.conversations, conversation]\n    });\n  }\n\n  handleReceivedMessagem(response) {\n    const {\n      messagem\n    } = response;\n    const conversations = [...this.state.conversations];\n    const conversation = conversations.find(conversation => conversation.id === messagem.conversation_id);\n    conversation.messagems = [...conversation.messagems, messagem];\n    this.setState({\n      conversations\n    });\n  }\n\n  render() {\n    const {\n      conversations,\n      activeConversation\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"conversationsList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ActionCable, {\n      channel: {\n        channel: 'ConversationsChannel'\n      },\n      onReceived: this.handleReceivedConversation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }), this.state.conversations.length ? /*#__PURE__*/React.createElement(Cable, {\n      conversations: conversations,\n      handleReceivedMessagem: this.handleReceivedMessagem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, \"Conversations\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, mapConversations(conversations, this.handleClick)), /*#__PURE__*/React.createElement(NewConversationForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), activeConversation ? /*#__PURE__*/React.createElement(MessagemsArea, {\n      conversation: findActiveConversation(conversations, activeConversation),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }) : null);\n  }\n\n}\n\nexport default ConversationsList;\n\nconst findActiveConversation = (conversations, activeConversation) => conversations.find(conversation => conversation.id === activeConversation);\n\nconst mapConversations = (conversations, handleClick) => conversations.map(conversation => /*#__PURE__*/React.createElement(\"li\", {\n  key: conversation.id,\n  onClick: () => handleClick(conversation.id),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 3\n  }\n}, conversation.title));","map":{"version":3,"sources":["C:/Users/Usuario/reactProjects/findYourHouse/app/src/components/ConversationsList.js"],"names":["React","ActionCable","NewConversationForm","MessagemsArea","Cable","ConversationsList","Component","constructor","state","conversations","activeConversation","handleClick","bind","handleReceivedConversation","handleReceivedMessagem","componentDidMount","token","localStorage","getItem","fetch","method","headers","Authorization","Accept","then","res","json","setState","id","response","conversation","messagem","find","conversation_id","messagems","render","channel","length","mapConversations","findActiveConversation","map","title"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport { ActionCable } from 'react-actioncable-provider';\nimport NewConversationForm from './NewConversationForm';\nimport MessagemsArea from './MessagemsArea';\nimport Cable from './Cable';\n\nclass ConversationsList extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      conversations: [],\n      activeConversation: null,\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleReceivedConversation = this.handleReceivedConversation.bind(this);\n    this.handleReceivedMessagem = this.handleReceivedMessagem.bind(this);\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n\n    fetch('https://aqueous-wildwood-18424.herokuapp.com/conversations', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n        Accept: 'application/json',\n      },\n    })\n      .then(res => res.json())\n      .then(conversations => this.setState({ conversations }));\n  }\n\n  handleClick(id) {\n    this.setState({ activeConversation: id });\n  }\n\n  handleReceivedConversation(response) {\n    const { conversation } = response;\n    this.setState({\n      conversations: [...this.state.conversations, conversation],\n    });\n  }\n\n  handleReceivedMessagem(response) {\n    const { messagem } = response;\n    const conversations = [...this.state.conversations];\n    const conversation = conversations.find(\n      conversation => conversation.id === messagem.conversation_id,\n    );\n    conversation.messagems = [...conversation.messagems, messagem];\n    this.setState({ conversations });\n  }\n\n  render() {\n    const { conversations, activeConversation } = this.state;\n    return (\n      <div className=\"conversationsList\">\n        <ActionCable\n          channel={{ channel: 'ConversationsChannel' }}\n          onReceived={this.handleReceivedConversation}\n        />\n        {this.state.conversations.length ? (\n          <Cable\n            conversations={conversations}\n            handleReceivedMessagem={this.handleReceivedMessagem}\n          />\n        ) : null}\n        <h2>Conversations</h2>\n        <ul>{mapConversations(conversations, this.handleClick)}</ul>\n        <NewConversationForm />\n        {activeConversation ? (\n          <MessagemsArea\n            conversation={findActiveConversation(\n              conversations,\n              activeConversation,\n            )}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default ConversationsList;\n\nconst findActiveConversation = (conversations, activeConversation) => conversations.find(\n  conversation => conversation.id === activeConversation,\n);\n\nconst mapConversations = (conversations, handleClick) => conversations.map(conversation => (\n  <li key={conversation.id} onClick={() => handleClick(conversation.id)}>\n    {conversation.title}\n  </li>\n));\n"]},"metadata":{},"sourceType":"module"}