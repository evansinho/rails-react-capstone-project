{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Usuario\\\\reactProjects\\\\findYourHouse\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{useEffect,useState}from'react';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as houseActions from'../actions/houseActions';import HiddenNav from'./HiddenNav';import page from'../styles/Page.module.css';var Page=function Page(_ref){var history=_ref.history,state=_ref.state,actions=_ref.actions,children=_ref.children;useEffect(function(){if(state.authenticated&&(!localStorage.getItem(\"token\")||localStorage.getItem(\"token\")==='undefined')){localStorage.setItem('token',state.authenticated);localStorage.setItem('id',state.currentUser.id);}else if(localStorage.getItem(\"token\")&&!state.authenticated){var token=localStorage.getItem(\"token\");var currentU=localStorage.getItem('id');actions.fetchSubscription(\"https://aqueous-wildwood-18424.herokuapp.com/users/\".concat(currentU),{headers:{\"Authorization\":\"Bearer \".concat(token)}},null,true);}else if(!state.authenticated){history.push('/sign_in',state);}},[]);return/*#__PURE__*/React.createElement(\"div\",{className:page.main},children,/*#__PURE__*/React.createElement(HiddenNav,null));};function mapStateToProps(_ref2){var state=_ref2.state;return{state:_objectSpread({},state)};}function mapActionsToProps(dispatch){return{actions:bindActionCreators(_objectSpread({},houseActions),dispatch)};}export default connect(mapStateToProps,mapActionsToProps)(withRouter(Page));","map":{"version":3,"sources":["C:/Users/Usuario/reactProjects/findYourHouse/app/src/components/Page.js"],"names":["React","useEffect","useState","withRouter","connect","bindActionCreators","houseActions","HiddenNav","page","Page","history","state","actions","children","authenticated","localStorage","getItem","setItem","currentUser","id","token","currentU","fetchSubscription","headers","push","main","mapStateToProps","mapActionsToProps","dispatch"],"mappings":"gLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAO,GAAKC,CAAAA,YAAZ,KAA8B,yBAA9B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,2BAAjB,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAA2C,IAAxCC,CAAAA,OAAwC,MAAxCA,OAAwC,CAA/BC,KAA+B,MAA/BA,KAA+B,CAAxBC,OAAwB,MAAxBA,OAAwB,CAAfC,QAAe,MAAfA,QAAe,CACtDZ,SAAS,CAAC,UAAM,CACd,GAAIU,KAAK,CAACG,aAAN,GACD,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,EAAkCD,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAkC,WADnE,CAAJ,CACqF,CACnFD,YAAY,CAACE,OAAb,CAAqB,OAArB,CAA8BN,KAAK,CAACG,aAApC,EACAC,YAAY,CAACE,OAAb,CAAqB,IAArB,CAA2BN,KAAK,CAACO,WAAN,CAAkBC,EAA7C,EACD,CAJD,IAIO,IAAIJ,YAAY,CAACC,OAAb,CAAqB,OAArB,GAAiC,CAACL,KAAK,CAACG,aAA5C,CAA2D,CAChE,GAAMM,CAAAA,KAAK,CAAGL,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAMK,CAAAA,QAAQ,CAAGN,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAjB,CAEAJ,OAAO,CAACU,iBAAR,8DAAgFD,QAAhF,EAA4F,CAC1FE,OAAO,CAAE,CACP,iCAA2BH,KAA3B,CADO,CADiF,CAA5F,CAIG,IAJH,CAIS,IAJT,EAKD,CATM,IASA,IAAI,CAACT,KAAK,CAACG,aAAX,CAA0B,CAC/BJ,OAAO,CAACc,IAAR,CAAa,UAAb,CAAyBb,KAAzB,EACD,CACF,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,mBACE,2BAAK,SAAS,CAAEH,IAAI,CAACiB,IAArB,EACIZ,QADJ,cAEE,oBAAC,SAAD,MAFF,CADF,CAMD,CA1BD,CA4BA,QAASa,CAAAA,eAAT,OAAoC,IAATf,CAAAA,KAAS,OAATA,KAAS,CAClC,MAAO,CAAEA,KAAK,kBAAOA,KAAP,CAAP,CAAP,CACD,CAED,QAASgB,CAAAA,iBAAT,CAA2BC,QAA3B,CAAqC,CACnC,MAAO,CACLhB,OAAO,CAAEP,kBAAkB,kBAAMC,YAAN,EAAsBsB,QAAtB,CADtB,CAAP,CAGD,CAED,cAAexB,CAAAA,OAAO,CAACsB,eAAD,CAAkBC,iBAAlB,CAAP,CAA4CxB,UAAU,CAACM,IAAD,CAAtD,CAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport * as houseActions from '../actions/houseActions';\r\nimport HiddenNav from './HiddenNav';\r\nimport page from '../styles/Page.module.css';\r\n\r\nconst Page = ({ history, state, actions, children }) => {\r\n  useEffect(() => {\r\n    if (state.authenticated &&\r\n      (!localStorage.getItem(\"token\") || localStorage.getItem(\"token\") === 'undefined')) {\r\n      localStorage.setItem('token', state.authenticated);\r\n      localStorage.setItem('id', state.currentUser.id);\r\n    } else if (localStorage.getItem(\"token\") && !state.authenticated) {\r\n      const token = localStorage.getItem(\"token\");\r\n      const currentU = localStorage.getItem('id');\r\n\r\n      actions.fetchSubscription(`https://aqueous-wildwood-18424.herokuapp.com/users/${currentU}`, {\r\n        headers: {\r\n          \"Authorization\": `Bearer ${token}`\r\n        }\r\n      }, null, true);\r\n    } else if (!state.authenticated) {\r\n      history.push('/sign_in', state);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className={page.main}>\r\n      { children }\r\n      <HiddenNav />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps({ state }) {\r\n  return { state: { ...state } };\r\n}\r\n\r\nfunction mapActionsToProps(dispatch) {\r\n  return {\r\n    actions: bindActionCreators({ ...houseActions }, dispatch),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(withRouter(Page));\r\n"]},"metadata":{},"sourceType":"module"}